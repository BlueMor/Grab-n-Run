<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_72) on Fri Oct 31 00:35:18 CET 2014 -->
<title>SecureLoaderFactory</title>
<meta name="date" content="2014-10-31">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SecureLoaderFactory";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../it/necst/grabnrun/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SecureLoaderFactory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?it/necst/grabnrun/SecureLoaderFactory.html" target="_top">Frames</a></li>
<li><a href="SecureLoaderFactory.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">it.necst.grabnrun</div>
<h2 title="Class SecureLoaderFactory" class="title">Class SecureLoaderFactory</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://d.android.com/reference/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>it.necst.grabnrun.SecureLoaderFactory</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">SecureLoaderFactory</span>
extends <a href="http://d.android.com/reference/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A Factory class that generates instances of classes used to 
 retrieve dynamic code in a secure way at run time.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Luca Falsina</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../it/necst/grabnrun/SecureLoaderFactory.html#DAYS_BEFORE_CACHE_EXPIRATION">DAYS_BEFORE_CACHE_EXPIRATION</a></strong></code>
<div class="block">When a remote container URL is encountered, this field specifies the time interval, 
 expressed in days, before which a local copy of a remote container, stored in an 
 application-private directory, will be considered fresh and so cached.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../it/necst/grabnrun/SecureLoaderFactory.html#SecureLoaderFactory(ContextWrapper)">SecureLoaderFactory</a></strong>(ContextWrapper&nbsp;parentContextWrapper)</code>
<div class="block">Creates a <code>SecureLoaderFactory</code> used to check and generate instances 
 from secure dynamic code loader classes.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun">SecureDexClassLoader</a></code></td>
<td class="colLast"><code><strong><a href="../../../it/necst/grabnrun/SecureLoaderFactory.html#createDexClassLoader(java.lang.String,%20java.lang.String,%20java.util.Map,%20java.lang.ClassLoader)">createDexClassLoader</a></strong>(<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dexPath,
                    <a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;libraryPath,
                    <a href="http://d.android.com/reference/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;packageNameToCertificateMap,
                    <a href="http://d.android.com/reference/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;parent)</code>
<div class="block">Creates a <a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun"><code>SecureDexClassLoader</code></a> that finds interpreted and native code in a set of
 provided locations (either local or remote via HTTP or HTTPS) in dexPath.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun">SecureDexClassLoader</a></code></td>
<td class="colLast"><code><strong><a href="../../../it/necst/grabnrun/SecureLoaderFactory.html#createDexClassLoader(java.lang.String,%20java.lang.String,%20java.util.Map,%20java.lang.ClassLoader,%20boolean)">createDexClassLoader</a></strong>(<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dexPath,
                    <a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;libraryPath,
                    <a href="http://d.android.com/reference/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;packageNameToCertificateMap,
                    <a href="http://d.android.com/reference/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;parent,
                    boolean&nbsp;performLazyEvaluation)</code>
<div class="block">This method returns a SecureDexClassLoader instance in the same way as it is 
 explained in the previous createDexClassLoader() method.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://d.android.com/reference/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://d.android.com/reference/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://d.android.com/reference/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://d.android.com/reference/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://d.android.com/reference/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://d.android.com/reference/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://d.android.com/reference/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://d.android.com/reference/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://d.android.com/reference/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://d.android.com/reference/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DAYS_BEFORE_CACHE_EXPIRATION">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DAYS_BEFORE_CACHE_EXPIRATION</h4>
<pre>public static&nbsp;int DAYS_BEFORE_CACHE_EXPIRATION</pre>
<div class="block">When a remote container URL is encountered, this field specifies the time interval, 
 expressed in days, before which a local copy of a remote container, stored in an 
 application-private directory, will be considered fresh and so cached.
 
 On the other hand, all of those containers, whose life time is greater than this
 field value, will be immediately erased from the device storage in stead of being cached.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SecureLoaderFactory(ContextWrapper)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SecureLoaderFactory</h4>
<pre>public&nbsp;SecureLoaderFactory(ContextWrapper&nbsp;parentContextWrapper)</pre>
<div class="block">Creates a <code>SecureLoaderFactory</code> used to check and generate instances 
 from secure dynamic code loader classes.
 
 It requires a <code>ContextWrapper</code> (i.e. the launching activity) which 
 should be used to manage and retrieve internal directories 
 of the application.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parentContextWrapper</code> - The content wrapper coming from the launching Activity</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createDexClassLoader(java.lang.String, java.lang.String, java.util.Map, java.lang.ClassLoader)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDexClassLoader</h4>
<pre>public&nbsp;<a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun">SecureDexClassLoader</a>&nbsp;createDexClassLoader(<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dexPath,
                                        <a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;libraryPath,
                                        <a href="http://d.android.com/reference/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;packageNameToCertificateMap,
                                        <a href="http://d.android.com/reference/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;parent)</pre>
<div class="block">Creates a <a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun"><code>SecureDexClassLoader</code></a> that finds interpreted and native code in a set of
 provided locations (either local or remote via HTTP or HTTPS) in dexPath.
 Interpreted classes are found in a set of DEX files contained in Jar or Apk files and 
 stored into an application-private, writable directory.
 
 Before executing one of these classes the signature of the target class is 
 verified against the certificate associated with its package name.
 Certificates location are provided by filling appropriately <code>packageNameToCertificateMap</code>};
 each package name must be linked with the remote location of the certificate that
 should be used to validate all the classes of that package. It's important 
 that each one of these locations uses HTTPS as its protocol; otherwise this 
 choice will be enforced!
 If a class package name do not match any of the provided entries in the map, 
 certificate location will be constructed by simply reverting package name and 
 transforming it into a web-based URL using HTTPS.
 
 Note that this method returns null if no matching Jar or Apk file is found at the
 provided dexPath parameter; otherwise a <a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun"><code>SecureDexClassLoader</code></a> instance is returned.
 
 Dynamic class loading with the returned <a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun"><code>SecureDexClassLoader</code></a> will fail whether
 at least one of these conditions is not accomplished: target class is not found in dexPath
 or is in a missing remote container (i.e. Internet connectivity is not present), missing or
 invalid (i.e. expired) certificate is associated with the package name of the target class,
 target class signature check fails against the associated certificate.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>dexPath</code> - the list of jar/apk files containing classes and resources; these paths could
  be either local URLs pointing to a location in the device or URLs that links
  to a resource stored in the web via HTTP/HTTPS. In the latter case, if Internet
  connectivity is available, the resource will be imported in a private-application 
  directory before being used.</dd><dd><code>libraryPath</code> - the list of directories containing native libraries; it may be null.</dd><dd><code>packageNameToCertificateMap</code> - a map that couples each package name to a URL which contains the certificate
  that must be used to validate all the classes that belong to that package
  before launching them at run time.</dd><dd><code>parent</code> - the parent class loader</dd>
<dt><span class="strong">Returns:</span></dt><dd>secureDexClassLoader</dd></dl>
</li>
</ul>
<a name="createDexClassLoader(java.lang.String, java.lang.String, java.util.Map, java.lang.ClassLoader, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>createDexClassLoader</h4>
<pre>public&nbsp;<a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun">SecureDexClassLoader</a>&nbsp;createDexClassLoader(<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dexPath,
                                        <a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;libraryPath,
                                        <a href="http://d.android.com/reference/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://d.android.com/reference/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;packageNameToCertificateMap,
                                        <a href="http://d.android.com/reference/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;parent,
                                        boolean&nbsp;performLazyEvaluation)</pre>
<div class="block">This method returns a SecureDexClassLoader instance in the same way as it is 
 explained in the previous createDexClassLoader() method.
 
 In addition it is possible to specify the mode in which the signature verification
 process will be carried.
 
 In particular by setting the performLazyEvaluation parameter on true, 
 a lazy verification process will be chosen. This means that the signature
 of the single container associated with the target class will be evaluated 
 only when the loadClass() method will be invoked on <a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun"><code>SecureDexClassLoader</code></a> 
 object. If this check succeeds the target class will be loaded.
 
 On the other hand, by setting the parameter performLazyEvaluation to false 
 an eager evaluation will be carried out. This means that before returning this 
 object, the signature verification procedure will be carried out on all the 
 provided containers and all of those that do not succeed in the process will
 be blocked from loading their classes in the following loadClass() calls.
 
 The use of one mode in stead of the other is merely a performance-related choice.
 If you do not care that much about it, just invoke the overloaded method 
 createDexClassLoader() which does not require to provide the performLazyEvaluation
 parameter. Otherwise as a general guideline, prefer the lazy mode whenever you
 need to load classes from many and heavy containers; use the eager mode when
 the number of involved containers is small and so the penalty for evaluating all
 of them immediately in one shot won't be so high.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>dexPath</code> - the list of jar/apk files containing classes and resources; these paths could
  be either local URLs pointing to a location in the device or URLs that links
  to a resource stored in the web via HTTP/HTTPS. In the latter case, if Internet
  connectivity is available, the resource will be imported in a private-application 
  directory before being used.</dd><dd><code>libraryPath</code> - the list of directories containing native libraries; it may be null.</dd><dd><code>packageNameToCertificateMap</code> - a map that couples each package name to a URL which contains the certificate
  that must be used to validate all the classes that belong to that package
  before launching them at run time.</dd><dd><code>parent</code> - the parent class loader</dd><dd><code>performLazyEvaluation</code> - the mode in which the verification will be handled. True for lazy verification;
  false for the eager one.</dd>
<dt><span class="strong">Returns:</span></dt><dd>secureDexClassLoader</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../it/necst/grabnrun/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SecureLoaderFactory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../it/necst/grabnrun/SecureDexClassLoader.html" title="class in it.necst.grabnrun"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?it/necst/grabnrun/SecureLoaderFactory.html" target="_top">Frames</a></li>
<li><a href="SecureLoaderFactory.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
